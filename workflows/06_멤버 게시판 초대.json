{"createdAt":"2024-10-30T06:20:01.118Z","updatedAt":"2024-12-19T05:43:14.000Z","id":"DcOO0SS1wtEi0RIY","name":"06_ë©¤ë²„ ê²Œì‹œíŒ ì´ˆëŒ€","active":true,"nodes":[{"parameters":{"endpoint":"={{ $vars.bettermode_end_point }}","requestFormat":"json","query":"=query {\n  spaceRoles(spaceId: {{ JSON.stringify($json.body[0].spaceId.id) }}) {\n    id\n    name\n    type\n    description\n  }\n}\n","variables":"=","responseFormat":"=json","headerParametersUi":{"parameter":[{"name":"={{ $vars.bettermode_client_id_key }}","value":"={{ $vars.bettermode_client_id_value }}"},{"name":"={{ $vars.bettermode_client_secret_key }}","value":"={{ $vars.bettermode_client_secret_value }}"}]}},"id":"b2a97953-520c-409a-81bd-9f61f31f09dc","name":"getSpaceRole","type":"n8n-nodes-base.graphql","typeVersion":1,"position":[660,460],"notesInFlow":true,"notes":"getSpaceRoleì€ spaceì— ìˆëŠ” role ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì§„í–‰í•œë‹¤.\n\nroleì˜ id ê°’ì´ ë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤.\n\nì´ê²Œ ìˆì–´ì•¼ ë©¤ë²„ë¥¼ íŠ¹ì • ê²Œì‹œíŒì— ì°¸ì—¬ì‹œí‚¬ ìˆ˜ ìˆë‹¤."},{"parameters":{"jsCode":"// memberIds ë°°ì—´ ë³€í™˜ ë¡œì§\nconst memberIds = $('Webhook').first().json.body[0].memberId;\nconsole.log(memberIds);\n\n// 'getSpaceRole' ë°ì´í„°ì—ì„œ \"Member\" ì—­í• ì„ ì°¾ì•„ roleId ì¶”ì¶œ\nconst spaceRoles = $('getSpaceRole').first().json.data.spaceRoles;\nconst memberRole = spaceRoles.find(role => role.name === 'Member');\nconst roleId = memberRole ? memberRole.id : null; // Member ì—­í• ì´ ì—†ì„ ê²½ìš°ë¥¼ ëŒ€ë¹„í•œ ì²˜ë¦¬\n\n// memberIds ë°°ì—´ì„ ìˆœíšŒí•˜ë©° roleIdì™€ memberIdë¡œ ì´ë£¨ì–´ì§„ ê°ì²´ ë°°ì—´ ìƒì„±\nconst res = memberIds.map(id => ({\n    roleId: roleId,\n    memberId: id\n}));\n\nreturn { input: res };\n"},"id":"81b19ba5-383c-475a-b14f-5290d077e041","name":"makeArrayId","type":"n8n-nodes-base.code","typeVersion":2,"position":[880,460],"notes":"3. **ë©¤ë²„ IDì™€ ì—­í•  ID ë°°ì—´ ìƒì„±**: ë©¤ë²„ IDì™€ ì—­í•  IDë¥¼ ë°°ì—´ í˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ ì´ˆëŒ€ ì¤€ë¹„ë¥¼ ì™„ë£Œí•©ë‹ˆë‹¤.\n"},{"parameters":{"endpoint":"={{ $vars.bettermode_end_point}}","requestFormat":"json","query":"mutation addSpaceMembers($spaceId: ID!, $input: [AddSpaceMemberInput!]!) { \n  addSpaceMembers(input: $input, spaceId: $spaceId) { \n    space { \n      id \n    } \n    member { \n      id \n      name \n    } \n  } \n}","variables":"={\n    \"spaceId\": \"{{ $node[\"Webhook\"].json[\"body\"][\"0\"][\"spaceId\"][\"id\"] }}\",\n    \"input\": {{ JSON.stringify($json.input) }}\n  }","headerParametersUi":{"parameter":[{"name":"={{ $vars.bettermode_client_id_key }}","value":"={{ $vars.bettermode_client_id_value }}"},{"name":"={{ $vars.bettermode_client_secret_key }}","value":"={{ $vars.bettermode_client_secret_value }}"}]}},"id":"16a61e8c-2c85-43e8-b5cc-1d5a91948b26","name":"inviteMember","type":"n8n-nodes-base.graphql","typeVersion":1,"position":[1140,460],"notes":"4. **ë©¤ë²„ ì´ˆëŒ€**: `inviteMember` ë…¸ë“œê°€ ë©¤ë²„ë“¤ì„ ì§€ì •ëœ ê²Œì‹œíŒì— ì´ˆëŒ€í•©ë‹ˆë‹¤.\n"},{"parameters":{"assignments":{"assignments":[{"id":"56586cdd-89e9-4128-8793-9f08d014d0ec","name":"text","value":"={{ $('makeArrayId').item.json.input.length }} ëª…ì´ ê²Œì‹œíŒì— ì´ˆëŒ€ ëìŠµë‹ˆë‹¤.","type":"string"}]},"options":{}},"id":"aff1dd32-223d-4543-9323-03f17a5d2be2","name":"makeSlackText","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1360,460],"notesInFlow":true,"notes":"5. **ìŠ¬ë™ ë©”ì‹œì§€ ìƒì„±**: ì´ˆëŒ€ëœ ë©¤ë²„ ìˆ˜ë¥¼ í¬í•¨í•œ ìŠ¬ë™ ë©”ì‹œì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n"},{"parameters":{"workflowId":{"__rl":true,"value":"XVWUaUPaaiGofxQ6","mode":"list","cachedResultName":"GPTers â€” \bslackNoti"},"options":{}},"id":"3aa82127-6ecc-4ec0-8fca-6e853c3b38d8","name":"Execute Workflow","type":"n8n-nodes-base.executeWorkflow","typeVersion":1.1,"position":[1580,460],"notesInFlow":true,"notes":"6. **ìŠ¬ë™ ì•Œë¦¼ ì „ì†¡**: ìŠ¬ë™ ì•Œë¦¼ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•˜ì—¬ ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼ì„ ë³´ëƒ…ë‹ˆë‹¤.\n"},{"parameters":{"content":"# ë©¤ë²„ ê²Œì‹œíŒ ì´ˆëŒ€ ì›Œí¬í”Œë¡œìš°\n\nì´ ì›Œí¬í”Œë¡œìš°ëŠ” ì§€ì •ëœ ë©¤ë²„ë“¤ì„ íŠ¹ì • ê²Œì‹œíŒì— ì´ˆëŒ€í•˜ê³ , \nì´ˆëŒ€ëœ ë©¤ë²„ ìˆ˜ë¥¼ ìŠ¬ë™ìœ¼ë¡œ ì•Œë¦¼í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n\n## êµ¬ì„± ìš”ì†Œ\n\n### 1. Webhook\n- **ì„¤ëª…**: ì™¸ë¶€ ìš”ì²­ì„ ë°›ì•„ ë©¤ë²„ ì´ˆëŒ€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œì‘í•˜ëŠ” ì›¹í›… ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.\n- **ê¸°ëŠ¥**: ê²Œì‹œíŒ ì´ˆëŒ€ ìš”ì²­ì„ ìˆ˜ì‹ í•˜ì—¬ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.\n\n### 2. getSpaceRole\n- **ì„¤ëª…**: Bettermode APIë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ê²Œì‹œíŒ(space)ì˜ ì—­í•  ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.\n- **ê¸°ëŠ¥**: ë©¤ë²„ë¥¼ ê²Œì‹œíŒì— ì´ˆëŒ€í•  ë•Œ í•„ìš”í•œ `roleId`ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\n\n### 3. makeArrayId\n- **ì„¤ëª…**: ì—­í•  IDì™€ ë©¤ë²„ IDë¥¼ ë°°ì—´ë¡œ ë¬¶ì–´ API ìš”ì²­ì— ì‚¬ìš©í•  ì¤€ë¹„ë¥¼ í•©ë‹ˆë‹¤.\n- **ê¸°ëŠ¥**: `roleId`ì™€ ê° ë©¤ë²„ì˜ `memberId`ë¥¼ ë°°ì—´ë¡œ ë³€í™˜í•˜ì—¬ ì´í›„ ë…¸ë“œì—ì„œ í™œìš©í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.\n\n### 4. inviteMember\n- **ì„¤ëª…**: ìƒì„±ëœ ë°°ì—´ ë°ì´í„°ë¥¼ ì´ìš©í•´ ë©¤ë²„ë“¤ì„ íŠ¹ì • ê²Œì‹œíŒì— ì¼ê´„ ì´ˆëŒ€í•©ë‹ˆë‹¤.\n- **ê¸°ëŠ¥**: Bettermode APIë¥¼ ì‚¬ìš©í•´ ë©¤ë²„ë“¤ì„ ê²Œì‹œíŒì— ì¶”ê°€í•©ë‹ˆë‹¤.\n\n### 5. makeSlackText\n- **ì„¤ëª…**: ìŠ¬ë™ìœ¼ë¡œ ì „ì†¡í•  ë©”ì‹œì§€ í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n- **ê¸°ëŠ¥**: ì´ˆëŒ€ëœ ë©¤ë²„ ìˆ˜ë¥¼ í™•ì¸í•˜ì—¬ `\"Xëª…ì´ ê²Œì‹œíŒì— ì´ˆëŒ€ëìŠµë‹ˆë‹¤.\"` í˜•ì‹ì˜ ë©”ì‹œì§€ë¥¼ ë§Œë“­ë‹ˆë‹¤.\n\n### 6. Execute Workflow\n- **ì„¤ëª…**: ìƒì„±ëœ ë©”ì‹œì§€ë¥¼ ìŠ¬ë™ìœ¼ë¡œ ì „ì†¡í•˜ê¸° ìœ„í•´ ë‹¤ë¥¸ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.\n- **ê¸°ëŠ¥**: ìŠ¬ë™ ì•Œë¦¼ì„ ì „ì†¡í•˜ëŠ” ì›Œí¬í”Œë¡œìš°ë¥¼ í˜¸ì¶œí•˜ì—¬ ì•Œë¦¼ì„ ì™„ë£Œí•©ë‹ˆë‹¤.\n\n## ë™ì‘ ë°©ì‹\n\n1. **Webhook ìš”ì²­ ìˆ˜ì‹ **: ì™¸ë¶€ ìš”ì²­ì„ í†µí•´ ë©¤ë²„ ì´ˆëŒ€ ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤.\n2. **ì—­í•  ì •ë³´ ì¡°íšŒ**: ê²Œì‹œíŒì— ì´ˆëŒ€ ì‹œ í•„ìš”í•œ ì—­í• (`roleId`)ì„ ì¡°íšŒí•©ë‹ˆë‹¤.\n3. **ë©¤ë²„ IDì™€ ì—­í•  ID ë°°ì—´ ìƒì„±**: ë©¤ë²„ IDì™€ ì—­í•  IDë¥¼ ë°°ì—´ í˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ ì´ˆëŒ€ ì¤€ë¹„ë¥¼ ì™„ë£Œí•©ë‹ˆë‹¤.\n4. **ë©¤ë²„ ì´ˆëŒ€**: `inviteMember` ë…¸ë“œê°€ ë©¤ë²„ë“¤ì„ ì§€ì •ëœ ê²Œì‹œíŒì— ì´ˆëŒ€í•©ë‹ˆë‹¤.\n5. **ìŠ¬ë™ ë©”ì‹œì§€ ìƒì„±**: ì´ˆëŒ€ëœ ë©¤ë²„ ìˆ˜ë¥¼ í¬í•¨í•œ ìŠ¬ë™ ë©”ì‹œì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n6. **ìŠ¬ë™ ì•Œë¦¼ ì „ì†¡**: ìŠ¬ë™ ì•Œë¦¼ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•˜ì—¬ ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼ì„ ë³´ëƒ…ë‹ˆë‹¤.\n\nì´ ì›Œí¬í”Œë¡œìš°ëŠ” ë©¤ë²„ ì´ˆëŒ€ ì‘ì—…ì„ ìë™í™”í•˜ê³ , íŒ€ì´ ì´ˆëŒ€ ìƒí™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ìŠ¬ë™ìœ¼ë¡œ ì•Œë¦¼ì„ ë³´ëƒ…ë‹ˆë‹¤.\n","height":1004,"width":674},"id":"b67c9483-1222-4398-95dd-61b8b321c4bb","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-120,-80]},{"parameters":{"httpMethod":"POST","path":"invite_board","options":{}},"id":"9f33c525-8d4d-4e32-a979-6c61f19617b0","name":"Webhook","type":"n8n-nodes-base.webhook","typeVersion":2,"position":[460,460],"webhookId":"fca6661b-05f0-405b-948f-ed4f17d0676a","notesInFlow":true,"notes":"1. **Webhook ìš”ì²­ ìˆ˜ì‹ **: ì™¸ë¶€ ìš”ì²­ì„ í†µí•´ ë©¤ë²„ ì´ˆëŒ€ ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤.\n"}],"connections":{"getSpaceRole":{"main":[[{"node":"makeArrayId","type":"main","index":0}]]},"makeArrayId":{"main":[[{"node":"inviteMember","type":"main","index":0}]]},"inviteMember":{"main":[[{"node":"makeSlackText","type":"main","index":0}]]},"makeSlackText":{"main":[[{"node":"Execute Workflow","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"getSpaceRole","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","saveManualExecutions":true,"callerPolicy":"workflowsFromSameOwner","errorWorkflow":"2FkHbmnpOA9Y42fo"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"Webhook":[{"json":{"headers":{"host":"geniefy.app.n8n.cloud","user-agent":"Mozilla/5.0 (compatible; AirtableScripting; +https://airtable.com/developers/scripting;)","content-length":"502","accept":"*/*","accept-encoding":"gzip, br","cdn-loop":"cloudflare; loops=1; subreqs=1","cf-connecting-ip":"3.238.126.41","cf-ew-via":"15","cf-ipcountry":"US","cf-ray":"8f3b6e9014d26fe0-IAD","cf-visitor":"{\"scheme\":\"https\"}","cf-worker":"n8n.cloud","content-type":"application/json","x-airtable-source":"appq8xK4PLp7D7aCg/wfloHsG7UF0B0Q2gB","x-forwarded-for":"3.238.126.41, 172.70.175.34","x-forwarded-host":"geniefy.app.n8n.cloud","x-forwarded-port":"443","x-forwarded-proto":"https","x-forwarded-server":"traefik-prod-users-gwc-5-6fbf5bdbfc-cjt7j","x-is-trusted":"yes","x-real-ip":"3.238.126.41"},"params":{},"query":{},"body":[{"spaceId":{"id":"rLQ6SxJ3NmPs","type":"Group","slug":"-vszx4jfv","name":"í…ŒìŠ¤íŠ¸ ê³µê°„ğŸ¥"},"memberId":["vqryGgbb4C","LttgcnvNfH","pxKBUPj6EE","yAmnPRuHpt","Wq23Fqroas","szuLQLRwKr","yjQGVOIgPO","xZLW61xtT2","xcyt6T8TDh","jqseIIG5ia","YeDmkT6IfT","20aT8j7MHK","MPZs0d0KyK","hI2kvKQpKK","gzUjgVAOpT","UFfOk2W6NN","ohQCdqDwZY","UUIeMyXzEE","GjOAr7cObh","0K24Q2QjTs","cVDTbZIh9d","7gIrrbnMnU","uLtXFZnDVY","ajmIXQhUy3","bKhQGO702V","1WxEkQrgLn","59Q8okkLVo","RtzpXX3hHa","mwvE53sQFB","Xp5KtqogPf"]}],"webhookUrl":"https://geniefy.app.n8n.cloud/webhook/invite_board","executionMode":"production"}}]},"versionId":"3ad44daa-641d-4bc3-b65e-cb4f9f4c5e73","triggerCount":1,"tags":[{"createdAt":"2024-12-19T05:43:13.292Z","updatedAt":"2024-12-19T05:43:13.292Z","id":"QyOnBrPoEGiu3Pw7","name":"ê²Œì‹œíŒ"}]}